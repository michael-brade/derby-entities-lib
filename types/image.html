<!--
    @parameters: mode; id, item, attr
-->

<index:>
    <view name="-{{@mode}}" inherit />


<-text:>
    {{data}}

<-html:>
    {{if @content}}
        <!-- {{console.log("got something to decorate!", @content)}} -->
        <!-- decorate @content with the image -->
        <div class='thumbnail'>
            <img class='imgPreview' src="{{data}}" />
            <div class='caption'>{{@content}}</div>
        </div>
    {{else}}
        <img src="{{data}}">
    {{/}}


<!-- TODO:
 - translate Image preview
 - store the filename, or, at least delete it each time the img src changes
 - make it possible to save it back to a file, i.e. download it again -->
<-edit:>
    <div class="row">
        <div class="col-md-4">
            <input as="imgInput" id="{{@id}}" class="form-control" type="file">
            <div>&nbsp;</div>
            <button type="button" class="btn btn-default" on-click="removeImage()">
                <i class="fa fa-times"></i> {{t($locale, "actions.removeImage")}}
            </button>
        </div>
        <div class="col-md-8">
            <img as="imgPreview" id="preview-{{@id}}" src="{{data}}" alt="Image preview">
        </div>
    </div>
