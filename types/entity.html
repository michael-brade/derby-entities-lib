<!--
    @parameters: mode; id, item, attr, loc
-->

<index:>
    <!-- You CANNOT call subviews directly, Derby won't recognize the correct controller if you do! -->
    {{if !mode}}
        <view name="html" inherit />
    {{else}}
        <view name="{{mode}}" inherit />
    {{/}}



<text:>
    {{attribute()}}

<html:>
    {{each subitems() as #subitem, #i}}
        {{unless #i == 0 || attr.id == 'name'}}, &sp;{{/}}
        <view name="{{entityAttributes().name.type}}"
              attr="{{entityAttributes().name}}"
              item="{{#subitem}}"
              inherit />
    <!-- {{else}}
        <br> -->
    {{/each}}

<edit:>
    <d-select2 id="select2-{{@id}}" class="form-control" fixed locale="{{l($locale)}}" value="{{item[attr.id]}}" inherit />
